<!-- execute when cart is empty  -->
<section class="cart mt-3" *ngIf="cartItems.length === 0">
  <div class="empty-cart py-16">
    <div class="container mx-auto text-center">
      <h1 class="font-weight-bold mb-2">Cart Empty</h1>
      <p class="text-gray-500">
        You probably haven't ordered yet.
        <br />
        To order go to Home Page.
      </p>
      <img
        class="empty_cart_img"
        src="https://cdn.dribbble.com/users/204955/screenshots/4930541/emptycart.png"
        alt="images"
      /><br />
    </div>
  </div>
</section>

<!-- execute if cart is not empty -->
<div class="row">
  <div
    class="cart_container mt-4 card shadow-lg col-lg-8"
    *ngIf="cartItems && cartItems.length"
  >
    <h3 class="order_summary mb-4 mt-3 text-center">Your Order</h3>

    <div class="shopping-cart ml-4 mr-4">
      <div class="column-labels">
        <label class="product-image">Image</label>
        <label class="product-details">Product</label>
        <label class="product-price">Price</label>
        <label class="product-quantity">Quantity</label>
        <label class="product-removal">Remove</label>
        <label class="product-line-price">Total</label>
      </div>

      <div
        class="product"
        *ngFor="let item of cartItems; let i = index"
        [attr.data-index]="i"
      >
        <div class="product-image">
          <img [src]="item.menu.image" alt="images" />
        </div>
        <div class="product-details">
          <div class="product-title">{{ item.menu.itemname }}</div>
        </div>
        <div class="product-price">{{ item.menu.price | currency: "INR" }}</div>
        <div class="product-quantity">
          <app-quantity-scroll
            [quantity]="item.quantity"
            (value)="changeQuantity(item.srno, $event)"
          ></app-quantity-scroll>

          <!-- <inpu
            type="number"
            [value]="item.quantity"
            min="1"
            #quantity
            (input)="changeQuantity(quantity.value, item.srno)"
          /> -->
        </div>
        <div class="product-removal">
          <button
            class="remove-product btn-danger"
            (click)="deleteItem(item.srno)"
          >
            Remove
          </button>
        </div>
        <div class="product-line-price">
          {{ item_total[i] | currency: "INR" }}
        </div>
      </div>

      <div class="totals">
        <div class="totals-item">
          <label>Subtotal</label>
          <div class="totals-value" id="cart-subtotal">
            {{ subtotal | currency: "INR" }}
          </div>
        </div>
        <div class="totals-item">
          <label>Tax (5%)</label>
          <div class="totals-value" id="cart-tax">
            {{ tax | currency: "INR" }}
          </div>
        </div>
        <div class="totals-item">
          <label>Shipping</label>
          <div class="totals-value" id="cart-shipping">
            {{ 150 | currency: "INR" }}
          </div>
        </div>
        <div class="totals-item totals-item-total grand-total">
          <label>Grand Total</label>
          <div class="totals-value" id="cart-total grand-total">
            {{ total | currency: "INR" }}
          </div>
        </div>
      </div>

      <!-- <button class="checkout">Checkout</button> -->
    </div>
    <button
      class="placeOrder mb-4"
      data-bs-toggle="modal"
      data-bs-target="#confirmOrder"
    >
      Place Order
    </button>
  </div>
</div>

<!-- loding spinner after order placed -->
<div *ngIf="showLoader">
  <ngx-spinner></ngx-spinner>
</div>

<!-- confirmation modal for order -->
<div id="confirmOrder" class="modal fade" tabindex="-1">
  <div class="modal-dialog modal-confirm">
    <div class="modal-content">
      <div class="modal-header flex-column">
        <h4 class="modal-title w-100">Place Order</h4>
      </div>
      <div class="modal-body">
        <p>Do you want to place order?</p>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button
          type="button"
          id="delete"
          class="btn btn-danger submitbtn"
          data-bs-dismiss="modal"
          (click)="orderProcessing()"
        >
          Place Order
        </button>
      </div>
    </div>
  </div>
</div>
