<!-- execute when cart is empty  -->
<section class="cart mt-3" *ngIf="cartItems.length === 0">
  <div class="empty-cart py-16">
    <div class="container mx-auto text-center">
      <h1 class="font-weight-bold mb-2">Cart Empty</h1>
      <p class="text-gray-500">
        You probably haven't ordered yet.
        <br />
        To order go to Home Page.
      </p>
      <img class="empty_cart_img" src="https://cdn.dribbble.com/users/204955/screenshots/4930541/emptycart.png"
        alt="images" /><br />
    </div>
  </div>
</section>

<!-- execute if cart is not empty -->
<div class="row" *ngIf="cartItems && cartItems.length">
  <div class="cart_container  mt-4 card shadow  col-md-7 col-lg-7 col-sm-12 ml-5" >
    <h3 class="order_summary mb-4 mt-3 text-center">Your Order</h3>

    <div class="shopping-cart  ">
      <div class="column-labels">
        <label class="product-image">Image</label>
        <label class="product-details ml-3">Product</label>
        <label class="product-price ml-2">Price</label>
        <label class="product-quantity ml-2">Quantity</label>
        <label class="product-removal ml-3">Remove</label>
        <label class="product-line-price">Total</label>
      </div>

      <div class="product" *ngFor="let item of cartItems; let i = index" [attr.data-index]="i">
        <div class="product-image">
          <img src="https://post.healthline.com/wp-content/uploads/2020/07/pizza-beer-1200x628-facebook-1200x628.jpg" alt="images" />
        </div>
        <div class="product-details ml-3">
          <div class="product-title">{{ item.menu.itemname }}</div>
        </div>
        <div class="product-price  ml-2">{{ item.menu.price | currency: "INR" }}</div>
        <div class="product-quantity  ml-2">
          <app-quantity-scroll [quantity]="item.quantity" (value)="changeQuantity(item.srno, $event)">
          </app-quantity-scroll>
        </div>
        <div class="product-removal  ml-3">
          <button class="remove-product btn-danger px-2 py-1" (click)="deleteItem(item.srno)">
            Remove
          </button>
        </div>
        <div class="product-line-price  ml-2">
          {{ item_total[i] | currency: "INR" }}
        </div>
      </div>
    </div>

  </div>


  <div class="totals card col-lg-4 col-sm-12 col-md-4 shadow total-container  mt-4 ml-4">
    <h3 class="order_summary mb-4 mt-3 text-center">Shipping Details</h3>

    
    <div id="address" class="bg-light rounded mt-1">
      <div class="address_container ml-2">
        <div class="h5 font-weight-bold text-primary"> Address </div>
        <div class="d-md-flex justify-content-md-start align-items-md-center pt-3">
            <div class="mr-auto" *ngIf="register.checked"> <b>Home Address</b>
               <p class="text-justify text-muted home_address">{{address}}</p>
           </div>
              <!-- !register.checked -->
              <div class="mr-auto mb-2" *ngIf="!register.checked"> <input type="text" placeholder="Enter Address"> </div>
           </div>
        <input type="checkbox" checked (change)="register" #register> <label class="h6">Shipping address is same as home address</label>
      </div>
    </div>

  <div class="totals-item mt-2 ">
      <label>Subtotal</label>
      <div class="totals-value " id="cart-subtotal">
        {{ subtotal | currency: "INR" }}
      </div>
    </div>
    <div class="totals-item">
      <label>Tax (5%)</label>
      <div class="totals-value" id="cart-tax">
        {{ tax | currency: "INR" }}
      </div>
    </div>
    <div class="totals-item">
      <label>Shipping</label>
      <div class="totals-value" id="cart-shipping">
        {{ 50 | currency: "INR" }}
      </div>
    </div>
    <div class="totals-item totals-item-total grand-total">
      <label>Grand Total</label>
      <div class="totals-value" id="cart-total grand-total">
        {{ total | currency: "INR" }}
      </div>
      <button class="placeOrder mb-4 px-2 py-2 text-center" data-bs-toggle="modal" data-bs-target="#confirmOrder">
        Place Order
      </button>
    </div>
  </div>
</div>

<!-- loding spinner after order placed -->
<div *ngIf="showLoader">
  <ngx-spinner></ngx-spinner>
</div>

<!-- confirmation modal for order -->
<div id="confirmOrder" class="modal fade" tabindex="-1">
  <div class="modal-dialog modal-confirm">
    <div class="modal-content">
      <div class="modal-header flex-column">
        <h4 class="modal-title w-100">Place Order</h4>
      </div>
      <div class="modal-body">
        <p>Do you want to place order?</p>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" id="delete" class="btn btn-danger submitbtn" data-bs-dismiss="modal"
          (click)="orderProcessing()">
          Place Order
        </button>
      </div>
    </div>
  </div>
</div>